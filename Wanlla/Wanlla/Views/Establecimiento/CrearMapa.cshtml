@model List<Modelo.receta_establecimiento>
@{
    ViewBag.Title = "Establecimientos";
}
<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAHvxGSjoQvn1E4QATGxldvKxIrkstZYKo&callback=getMap">
</script>
<script type="text/javascript">
    var establecimientos =
        [
            ['IL Vero', -18.009866955287567, -70.24498946964741, 3],
            ['Don Caruso', -18.009923, -70.24493, 3],
            ['La Mamma Rosa', -18.008902, -70.243708, 3],
            ['Presto', -18.00969, -70.244477, 3],
            ['Presto', -18.013615, -70.248818, 3]
        ];
    @*@foreach (var m in Model)
    {
        <text>
        var nombre = m.establecimiento.nom_establecimiento;
        var latitud = m.establecimiento.lat_establecimiento;
        var longitud = m.establecimiento.lon_establecimiento;
        CrearArray(nombre, latitud, longitud);
        </text>
    }

    function CrearArray(nombre, latitud, longitud) {
        establecimiento[estableciento.length] = [""+nombre, latitud, longitud,3];
    }*@

    function getMap() {
        var ini_latlon = new google.maps.LatLng(-18.009866955287567, -70.24498946964741);

        var myLatLng = { lat: -18.009866955287567, lng: -70.24498946964741 };

        var mapOptions = {
            center: myLatLng,
            zoom: 17,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }

        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        setMarkers(map, establecimientos);
    }

    function setMarkers(map, establecimientoz) {
        for (var i = 0; i < establecimientoz.length; i++) {
            var establecimiento = establecimientoz[i];
            var marker = new google.maps.Marker({
                position: { lat: establecimiento[1], lng: establecimiento[2] },
                map: map,
                title: establecimiento[0],
                zIndex: establecimiento[3]
            });
        }
    }
</script>
<div id="map_canvas" style="width:900px; height:500px"></div>